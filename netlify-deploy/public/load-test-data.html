<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Åadowanie Danych Testowych - QuizMaster</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-white p-8">
    <div class="max-w-4xl mx-auto">
        <div class="glass rounded-lg p-8 mb-8">
            <h1 class="text-3xl font-bold mb-6 text-center">ğŸ¯ Generator Danych Testowych QuizMaster</h1>
            
            <div class="bg-white/10 rounded-lg p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">ğŸ“‹ Co zostanie wygenerowane:</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-semibold mb-2">ğŸ‘¥ UÅ¼ytkownicy:</h3>
                        <ul class="text-sm space-y-1">
                            <li>â€¢ 80+ uczniÃ³w (rÃ³Å¼ne klasy)</li>
                            <li>â€¢ 1 nauczyciel (Paulina)</li>
                            <li>â€¢ 100+ rodzicÃ³w</li>
                            <li>â€¢ Konta demo dla kaÅ¼dej roli</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">ğŸ“š ZawartoÅ›Ä‡:</h3>
                        <ul class="text-sm space-y-1">
                            <li>â€¢ 30+ quizÃ³w (rÃ³Å¼ne przedmioty)</li>
                            <li>â€¢ 50+ zadaÅ„ domowych</li>
                            <li>â€¢ 500+ wynikÃ³w quizÃ³w</li>
                            <li>â€¢ Plany lekcji dla wszystkich klas</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">ğŸ“Š Statystyki:</h3>
                        <ul class="text-sm space-y-1">
                            <li>â€¢ Wyniki i oceny</li>
                            <li>â€¢ OsiÄ…gniÄ™cia uczniÃ³w</li>
                            <li>â€¢ Trendy i analizy</li>
                            <li>â€¢ Rankingi klas</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">ğŸ’¬ Komunikacja:</h3>
                        <ul class="text-sm space-y-1">
                            <li>â€¢ WiadomoÅ›ci miÄ™dzy uÅ¼ytkownikami</li>
                            <li>â€¢ Powiadomienia systemowe</li>
                            <li>â€¢ Wydarzenia szkolne</li>
                            <li>â€¢ OgÅ‚oszenia</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-yellow-500/20 rounded-lg p-4 mb-6">
                <p class="text-sm">
                    <strong>âš ï¸ Uwaga:</strong> Ta operacja zastÄ…pi wszystkie istniejÄ…ce dane w localStorage!
                    Upewnij siÄ™, Å¼e chcesz kontynuowaÄ‡.
                </p>
            </div>

            <div class="flex gap-4 justify-center">
                <button onclick="generateTestData()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-semibold transition">
                    ğŸš€ Generuj Dane Testowe
                </button>
                <button onclick="setupPaulinaOnly()" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-semibold transition">
                    ğŸ‘©â€ğŸ« Tylko Konto Pauliny
                </button>
                <button onclick="clearAllData()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-semibold transition">
                    ğŸ—‘ï¸ WyczyÅ›Ä‡ Wszystkie Dane
                </button>
            </div>
        </div>

        <div id="status" class="glass rounded-lg p-6 hidden">
            <h2 class="text-xl font-semibold mb-4">ğŸ“Š Status Generowania:</h2>
            <div id="progress" class="space-y-2"></div>
        </div>

        <div id="results" class="glass rounded-lg p-6 hidden mt-6">
            <h2 class="text-xl font-semibold mb-4">âœ… Dane Wygenerowane!</h2>
            <div id="summary" class="space-y-2 mb-6"></div>
            
            <div class="bg-blue-600/20 rounded-lg p-4">
                <h3 class="font-semibold mb-2">ğŸ” Konta Demo:</h3>
                <div class="grid md:grid-cols-3 gap-4 text-sm">
                    <div>
                        <strong>UczeÅ„:</strong><br>
                        Login: uczen@demo.pl<br>
                        HasÅ‚o: demo123
                    </div>
                    <div>
                        <strong>Nauczyciel:</strong><br>
                        Login: paulinaodmatematyki<br>
                        HasÅ‚o: paulina#314159265
                    </div>
                    <div>
                        <strong>Rodzic:</strong><br>
                        Login: rodzic@demo.pl<br>
                        HasÅ‚o: demo123
                    </div>
                </div>
            </div>
            
            <div class="mt-6 text-center">
                <a href="/" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-semibold inline-block transition">
                    ğŸ  PrzejdÅº do Aplikacji
                </a>
            </div>
        </div>
    </div>

    <script src="/js/test-data-generator.js"></script>
    <script src="/js/test-data-generator-simple.js"></script>
    <script>
        function updateProgress(message, type = 'info') {
            const progress = document.getElementById('progress');
            const div = document.createElement('div');
            div.className = type === 'success' ? 'text-green-400' : type === 'error' ? 'text-red-400' : 'text-blue-400';
            div.innerHTML = `${type === 'success' ? 'âœ…' : type === 'error' ? 'âŒ' : 'â³'} ${message}`;
            progress.appendChild(div);
        }

        async function generateTestData() {
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('results');
            const progress = document.getElementById('progress');
            
            // PokaÅ¼ status, ukryj wyniki
            statusDiv.classList.remove('hidden');
            resultsDiv.classList.add('hidden');
            progress.innerHTML = '';
            
            try {
                updateProgress('Inicjalizacja generatora danych...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie uÅ¼ytkownikÃ³w...');
                const generator = new TestDataGenerator();
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie klas i przedmiotÃ³w...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie quizÃ³w i zadaÅ„...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie wynikÃ³w i statystyk...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie wiadomoÅ›ci i powiadomieÅ„...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Zapisywanie danych do localStorage...');
                const result = generator.generateAndSave();
                await new Promise(resolve => setTimeout(resolve, 500));
                
                if (result.success) {
                    updateProgress('Wszystkie dane zostaÅ‚y wygenerowane!', 'success');
                    
                    // PokaÅ¼ podsumowanie
                    setTimeout(() => {
                        resultsDiv.classList.remove('hidden');
                        const summary = document.getElementById('summary');
                        summary.innerHTML = `
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <strong>UÅ¼ytkownicy:</strong>
                                    <ul class="text-sm ml-4">
                                        <li>â€¢ Uczniowie: ${result.data.users.students.length}</li>
                                        <li>â€¢ Nauczyciele: ${result.data.users.teachers.length}</li>
                                        <li>â€¢ Rodzice: ${result.data.users.parents.length}</li>
                                    </ul>
                                </div>
                                <div>
                                    <strong>ZawartoÅ›Ä‡:</strong>
                                    <ul class="text-sm ml-4">
                                        <li>â€¢ Quizy: ${result.data.content.quizzes.length}</li>
                                        <li>â€¢ Zadania: ${result.data.content.tasks.length}</li>
                                        <li>â€¢ Wyniki: ${result.data.performance.results.length}</li>
                                    </ul>
                                </div>
                            </div>
                        `;
                    }, 1000);
                }
            } catch (error) {
                updateProgress(`BÅ‚Ä…d: ${error.message}`, 'error');
                console.error('BÅ‚Ä…d generowania danych:', error);
            }
        }

        async function setupPaulinaOnly() {
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('results');
            const progress = document.getElementById('progress');
            
            statusDiv.classList.remove('hidden');
            resultsDiv.classList.add('hidden');
            progress.innerHTML = '';
            
            try {
                updateProgress('Tworzenie konta nauczyciela Pauliny...');
                
                const generator = new SimpleTestDataGenerator();
                const result = await generator.setupPaulina();
                
                if (result.success) {
                    updateProgress('Konto utworzone pomyÅ›lnie!', 'success');
                    updateProgress('Login: paulinaodmatematyki', 'success');
                    updateProgress('HasÅ‚o: [hasÅ‚o z env Netlify lub domyÅ›lne]', 'success');
                    
                    setTimeout(() => {
                        alert('âœ… Konto nauczyciela Pauliny zostaÅ‚o utworzone!\n\nLogin: paulinaodmatematyki');
                        location.reload();
                    }, 2000);
                }
            } catch (error) {
                updateProgress(`BÅ‚Ä…d: ${error.message}`, 'error');
            }
        }

        function clearAllData() {
            if (confirm('Czy na pewno chcesz usunÄ…Ä‡ wszystkie dane? Ta operacja jest nieodwracalna!')) {
                const keysToRemove = [
                    'users', 'classes', 'subjects', 'schedules', 'quizzes', 
                    'tasks', 'quizResults', 'statistics', 'messages', 
                    'notifications', 'events', 'sampleQuestions', 'demoAccounts',
                    'currentUser', 'quizHistory', 'achievements'
                ];
                
                keysToRemove.forEach(key => localStorage.removeItem(key));
                
                alert('âœ… Wszystkie dane zostaÅ‚y usuniÄ™te!');
                location.reload();
            }
        }

        // SprawdÅº czy sÄ… juÅ¼ jakieÅ› dane
        window.addEventListener('load', () => {
            const hasData = localStorage.getItem('users');
            if (hasData) {
                const users = JSON.parse(hasData);
                console.log(`â„¹ï¸ Znaleziono istniejÄ…ce dane: ${users.length} uÅ¼ytkownikÃ³w`);
            }
        });
    </script>
</body>
</html>