<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>≈Åadowanie Danych Testowych - QuizMaster</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <style>
        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        .loader {
            border: 3px solid #f3f3f3;
            border-top: 3px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            display: inline-block;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="text-white p-8">
    <div class="max-w-4xl mx-auto">
        <div class="glass rounded-lg p-8 mb-8">
            <h1 class="text-3xl font-bold mb-6 text-center">üéØ Generator Danych Testowych QuizMaster</h1>
            
            <div class="bg-white/10 rounded-lg p-6 mb-6">
                <h2 class="text-xl font-semibold mb-4">üìã Co zostanie wygenerowane:</h2>
                <div class="grid md:grid-cols-2 gap-4">
                    <div>
                        <h3 class="font-semibold mb-2">üë• U≈ºytkownicy:</h3>
                        <ul class="text-sm space-y-1">
                            <li>‚Ä¢ 80+ uczni√≥w (r√≥≈ºne klasy)</li>
                            <li>‚Ä¢ 10+ nauczycieli</li>
                            <li>‚Ä¢ 100+ rodzic√≥w</li>
                            <li>‚Ä¢ Konta demo dla ka≈ºdej roli</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">üìö Zawarto≈õƒá:</h3>
                        <ul class="text-sm space-y-1">
                            <li>‚Ä¢ 30+ quiz√≥w (r√≥≈ºne przedmioty)</li>
                            <li>‚Ä¢ 50+ zada≈Ñ domowych</li>
                            <li>‚Ä¢ 500+ wynik√≥w quiz√≥w</li>
                            <li>‚Ä¢ Plany lekcji dla wszystkich klas</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">üìä Statystyki:</h3>
                        <ul class="text-sm space-y-1">
                            <li>‚Ä¢ Wyniki i oceny</li>
                            <li>‚Ä¢ OsiƒÖgniƒôcia uczni√≥w</li>
                            <li>‚Ä¢ Trendy i analizy</li>
                            <li>‚Ä¢ Rankingi klas</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="font-semibold mb-2">üí¨ Komunikacja:</h3>
                        <ul class="text-sm space-y-1">
                            <li>‚Ä¢ Wiadomo≈õci miƒôdzy u≈ºytkownikami</li>
                            <li>‚Ä¢ Powiadomienia systemowe</li>
                            <li>‚Ä¢ Wydarzenia szkolne</li>
                            <li>‚Ä¢ Og≈Çoszenia</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="bg-yellow-500/20 rounded-lg p-4 mb-6">
                <p class="text-sm">
                    <strong>‚ö†Ô∏è Uwaga:</strong> Ta operacja zastƒÖpi wszystkie istniejƒÖce dane w localStorage!
                    Upewnij siƒô, ≈ºe chcesz kontynuowaƒá.
                </p>
            </div>

            <div class="flex gap-4 justify-center">
                <button onclick="generateTestData()" class="bg-green-600 hover:bg-green-700 px-6 py-3 rounded-lg font-semibold transition">
                    üöÄ Generuj Dane Testowe
                </button>
                <button onclick="clearAllData()" class="bg-red-600 hover:bg-red-700 px-6 py-3 rounded-lg font-semibold transition">
                    üóëÔ∏è Wyczy≈õƒá Wszystkie Dane
                </button>
            </div>
        </div>

        <div id="status" class="glass rounded-lg p-6 hidden">
            <h2 class="text-xl font-semibold mb-4">üìä Status Generowania:</h2>
            <div id="progress" class="space-y-2"></div>
        </div>

        <div id="results" class="glass rounded-lg p-6 hidden mt-6">
            <h2 class="text-xl font-semibold mb-4">‚úÖ Dane Wygenerowane!</h2>
            <div id="summary" class="space-y-2 mb-6"></div>
            
            <div class="bg-blue-600/20 rounded-lg p-4">
                <h3 class="font-semibold mb-2">üîê Konta Demo:</h3>
                <div class="grid md:grid-cols-3 gap-4 text-sm">
                    <div>
                        <strong>Ucze≈Ñ:</strong><br>
                        Login: uczen@demo.pl<br>
                        Has≈Ço: demo123
                    </div>
                    <div>
                        <strong>Nauczyciel:</strong><br>
                        Login: nauczyciel@demo.pl<br>
                        Has≈Ço: demo123
                    </div>
                    <div>
                        <strong>Rodzic:</strong><br>
                        Login: rodzic@demo.pl<br>
                        Has≈Ço: demo123
                    </div>
                </div>
            </div>
            
            <div class="mt-6 text-center">
                <a href="/" class="bg-purple-600 hover:bg-purple-700 px-6 py-3 rounded-lg font-semibold inline-block transition">
                    üè† Przejd≈∫ do Aplikacji
                </a>
            </div>
        </div>
    </div>

    <script src="/js/test-data-generator.js"></script>
    <script>
        function updateProgress(message, type = 'info') {
            const progress = document.getElementById('progress');
            const div = document.createElement('div');
            div.className = type === 'success' ? 'text-green-400' : type === 'error' ? 'text-red-400' : 'text-blue-400';
            div.innerHTML = `${type === 'success' ? '‚úÖ' : type === 'error' ? '‚ùå' : '‚è≥'} ${message}`;
            progress.appendChild(div);
        }

        async function generateTestData() {
            const statusDiv = document.getElementById('status');
            const resultsDiv = document.getElementById('results');
            const progress = document.getElementById('progress');
            
            // Poka≈º status, ukryj wyniki
            statusDiv.classList.remove('hidden');
            resultsDiv.classList.add('hidden');
            progress.innerHTML = '';
            
            try {
                updateProgress('Inicjalizacja generatora danych...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie u≈ºytkownik√≥w...');
                const generator = new TestDataGenerator();
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie klas i przedmiot√≥w...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie quiz√≥w i zada≈Ñ...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie wynik√≥w i statystyk...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Generowanie wiadomo≈õci i powiadomie≈Ñ...');
                await new Promise(resolve => setTimeout(resolve, 500));
                
                updateProgress('Zapisywanie danych do localStorage...');
                const result = generator.generateAndSave();
                await new Promise(resolve => setTimeout(resolve, 500));
                
                if (result.success) {
                    updateProgress('Wszystkie dane zosta≈Çy wygenerowane!', 'success');
                    
                    // Poka≈º podsumowanie
                    setTimeout(() => {
                        resultsDiv.classList.remove('hidden');
                        const summary = document.getElementById('summary');
                        summary.innerHTML = `
                            <div class="grid md:grid-cols-2 gap-4">
                                <div>
                                    <strong>U≈ºytkownicy:</strong>
                                    <ul class="text-sm ml-4">
                                        <li>‚Ä¢ Uczniowie: ${result.data.users.students.length}</li>
                                        <li>‚Ä¢ Nauczyciele: ${result.data.users.teachers.length}</li>
                                        <li>‚Ä¢ Rodzice: ${result.data.users.parents.length}</li>
                                    </ul>
                                </div>
                                <div>
                                    <strong>Zawarto≈õƒá:</strong>
                                    <ul class="text-sm ml-4">
                                        <li>‚Ä¢ Quizy: ${result.data.content.quizzes.length}</li>
                                        <li>‚Ä¢ Zadania: ${result.data.content.tasks.length}</li>
                                        <li>‚Ä¢ Wyniki: ${result.data.performance.results.length}</li>
                                    </ul>
                                </div>
                            </div>
                        `;
                    }, 1000);
                }
            } catch (error) {
                updateProgress(`B≈ÇƒÖd: ${error.message}`, 'error');
                console.error('B≈ÇƒÖd generowania danych:', error);
            }
        }

        function clearAllData() {
            if (confirm('Czy na pewno chcesz usunƒÖƒá wszystkie dane? Ta operacja jest nieodwracalna!')) {
                const keysToRemove = [
                    'users', 'classes', 'subjects', 'schedules', 'quizzes', 
                    'tasks', 'quizResults', 'statistics', 'messages', 
                    'notifications', 'events', 'sampleQuestions', 'demoAccounts',
                    'currentUser', 'quizHistory', 'achievements'
                ];
                
                keysToRemove.forEach(key => localStorage.removeItem(key));
                
                alert('‚úÖ Wszystkie dane zosta≈Çy usuniƒôte!');
                location.reload();
            }
        }

        // Sprawd≈∫ czy sƒÖ ju≈º jakie≈õ dane
        window.addEventListener('load', () => {
            const hasData = localStorage.getItem('users');
            if (hasData) {
                const users = JSON.parse(hasData);
                console.log(`‚ÑπÔ∏è Znaleziono istniejƒÖce dane: ${users.length} u≈ºytkownik√≥w`);
            }
        });
    </script>
</body>
</html>